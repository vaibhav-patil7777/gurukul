<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gallery | Gurukul School</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:"Times New Roman",serif;background:#faf9f7;color:#2b2b2b;line-height:1.7;}
.navbar{width:100%;padding:28px 70px;display:flex;justify-content:space-between;align-items:center;background:transparent;}
.logo{font-size:30px;font-weight:600;letter-spacing:1.5px;color:#4f5d4a;}
.nav-links{display:flex;gap:34px;}
.nav-links a{text-decoration:none;font-size:16px;color:#6b6b6b;position:relative;padding-bottom:4px;}
.nav-links a::after{content:"";position:absolute;left:0;bottom:0;width:0;height:1px;background:#4f5d4a;transition:0.3s ease;}
.nav-links a:hover{color:#2b2b2b;}
.nav-links a:hover::after{width:100%;}
.page-title{text-align:center;padding:80px 20px 40px;}
.page-title h1{font-size:40px;font-weight:500;}
.page-title p{font-size:18px;color:#6f6f6f;}
.container{max-width:1200px;margin:auto;padding:20px;display:flex;flex-wrap:wrap;gap:20px;justify-content:center;}
.gallery-item{width:300px;overflow:hidden;border-radius:10px;position:relative;border:2px solid #0ff;box-shadow:0 0 10px rgba(0,255,255,0.3);transition:transform 0.3s, box-shadow 0.3s;cursor:pointer;}
.gallery-item:hover{transform:translateY(-5px);box-shadow:0 0 20px #0ff,0 0 40px rgba(0,255,255,0.5);}
.gallery-item img,.gallery-item video{width:100%;height:200px;object-fit:cover;border-radius:10px;}
.description{padding:8px;text-align:center;font-size:14px;color:#333;}
.modal{display:none;position:fixed;z-index:1000;left:0;top:0;width:100%;height:100%;background:transparent;justify-content:center;align-items:center;}
.modal-content{max-width:90%;max-height:80%;border-radius:10px;display:flex;justify-content:center;align-items:center;}
.modal-content img,.modal-content video{width:auto;max-width:100%;height:auto;max-height:80vh;border-radius:10px;box-shadow:0 0 30px #0ff;}
.close{position:absolute;top:20px;right:30px;font-size:40px;color:#0ff;cursor:pointer;transition:0.3s;}
.close:hover{color:#2b2b2b;}
@media(max-width:992px){.navbar{padding:25px 40px;}}
@media(max-width:600px){.navbar{flex-direction:column;gap:18px;padding:20px;}.page-title h1{font-size:30px;}.gallery-item{width:90%;height:auto;}}
</style>
</head>
<body>

<!-- NAVBAR -->
<nav class="navbar">
    <div class="logo">GEMS</div>
    <div class="nav-links">
        <a href="{{ url_for('home') }}">Home</a>
        <a href="{{ url_for('about') }}">About</a>
        <a href="{{ url_for('course_page') }}">Courses</a>
        <a href="{{ url_for('gallery_page') }}">Gallery</a>
        <a href="{{ url_for('contact_page') }}">Contact</a>
        <a href="{{ url_for('admin_login') }}">Admin</a>
    </div>
</nav>

<!-- PAGE TITLE -->
<section class="page-title">
    <h1>Gallery</h1>
    <p>Explore moments and activities of our institution</p>
</section>

<!-- GALLERY ITEMS -->
<div class="container">
{% for item in gallery %}
<div class="gallery-item">
    {% if item.file_type == 'image' %}
    <img src="{{ url_for('static', filename='uploads/' + item.file_name) }}" onclick="openModal(this)">
    {% else %}
    <video src="{{ url_for('static', filename='uploads/' + item.file_name) }}" onclick="openModal(this)" muted></video>
    {% endif %}
    {% if item.description %}
    <div class="description">{{ item.description }}</div>
    {% endif %}
</div>
{% endfor %}
</div>

<!-- MODAL -->
<div class="modal" id="modal">
    <span class="close" onclick="closeModal()">&times;</span>
    <div class="modal-content" id="modal-content"></div>
</div>

<script>
function openModal(el){
    let modal = document.getElementById('modal');
    let modalContent = document.getElementById('modal-content');
    modalContent.innerHTML = '';
    if(el.tagName=='IMG'){
        let img = document.createElement('img');
        img.src = el.src;
        modalContent.appendChild(img);
    } else if(el.tagName=='VIDEO'){
        let vid = document.createElement('video');
        vid.src = el.src;
        vid.controls = true;
        vid.autoplay = true;
        vid.style.maxWidth = '100%';
        vid.style.maxHeight = '80vh';
        modalContent.appendChild(vid);
    }
    modal.style.display='flex';
}

function closeModal(){
    document.getElementById('modal').style.display='none';
}

// Close modal on clicking outside content
document.getElementById('modal').addEventListener('click', function(e){
    if(e.target.id === 'modal'){
        closeModal();
    }
});
</script>

</body>
</html>
